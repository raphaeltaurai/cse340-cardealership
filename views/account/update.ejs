<% if (title) { %>
  <h1><%= title %></h1>
<% } %>

<% if (typeof errors !== 'undefined' && errors.errors && errors.errors.length > 0) { %>
  <div class="notice">
    <ul>
      <% errors.errors.forEach(function(error) { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  </div>
<% } %>
<%- messages() %>

<!-- Account Update Form -->
<form class="account-login-form" action="/account/update/<%= accountData ? accountData.account_id : '' %>" method="post" autocomplete="off" novalidate>
  <fieldset>
    <legend>Account Update</legend>
    <input type="hidden" name="account_id" value="<%= accountData ? accountData.account_id : '' %>">
    <div class="form-group">
      <label for="accountFirstname">First Name:</label>
      <input type="text" name="account_firstname" id="accountFirstname" placeholder="First Name" required value="<%= typeof account_firstname !== 'undefined' ? account_firstname : (accountData ? accountData.account_firstname : '') %>">
    </div>
    <div class="form-group">
      <label for="accountLastname">Last Name:</label>
      <input type="text" name="account_lastname" id="accountLastname" placeholder="Last Name" required value="<%= typeof account_lastname !== 'undefined' ? account_lastname : (accountData ? accountData.account_lastname : '') %>">
    </div>
    <div class="form-group">
      <label for="accountEmail">Email:</label>
      <input type="email" name="account_email" id="accountEmail" placeholder="email@example.com" required value="<%= typeof account_email !== 'undefined' ? account_email : (accountData ? accountData.account_email : '') %>">
    </div>
    <button type="submit" class="btn-main">Update Account</button>
  </fieldset>
</form>

<!-- Change Password Form -->
<form class="account-login-form" action="/account/update-password/<%= accountData ? accountData.account_id : '' %>" method="post" autocomplete="off" style="margin-top:2em;" novalidate>
  <fieldset>
    <legend>Change Password</legend>
    <input type="hidden" name="account_id" value="<%= accountData ? accountData.account_id : '' %>">
    <div class="form-group">
      <label for="newPassword">New Password:</label>
      <div style="position:relative;display:flex;align-items:center;">
        <input type="password" class="password-input" id="newPassword" name="account_password" placeholder="New password" required pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$">
        <button type="button" class="toggle-password" aria-label="Show password" style="background:none;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:1.2em;">
          <span class="eye-icon">👁️</span>
        </button>
      </div>
      <p class="form-text">By entering a new password, you will change your current password. Passwords must be at least 12 characters long and contain at least 1 capital letter, 1 number, and 1 special character.</p>
    </div>
    <div class="form-group">
      <label for="confirmNewPassword">Confirm New Password:</label>
      <div style="position:relative;display:flex;align-items:center;">
        <input type="password" class="password-input" id="confirmNewPassword" name="account_confirm_password" placeholder="Re-type new password" required>
        <button type="button" class="toggle-password" aria-label="Show password" style="background:none;border:none;position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;font-size:1.2em;">
          <span class="eye-icon">👁️</span>
        </button>
      </div>
    </div>
    <button type="submit" class="btn-main">Change Password</button>
  </fieldset>
</form>

<script src="/js/script.js"></script> 